---
layout: post
title:  "spring - ê¸°ë³¸2"
date:   2025-03-03 23:00 +09:00
categories: BE
---
> ì¸í”„ëŸ° ê¹€ì˜í•œë‹˜ ìŠ¤í”„ë§ í•µì‹¬ ì›ë¦¬ - ê¸°ë³¸í¸ ê°•ì˜ë¥¼ ë“£ê³  ì •ë¦¬í•œ ë‚´ìš©ì…ë‹ˆë‹¤   
https://www.inflearn.com/course/%EC%8A%A4%ED%94%84%EB%A7%81-%ED%95%B5%EC%8B%AC-%EC%9B%90%EB%A6%AC-%EA%B8%B0%EB%B3%B8%ED%8E%B8/dashboard


ëª©ì°¨

[1. ìƒˆë¡œìš´ í• ì¸ ì •ì±… ê°œë°œ](#ìƒˆë¡œìš´-í• ì¸-ì •ì±…-ê°œë°œ)<br>
[2. ìƒˆë¡œìš´ í• ì¸ ì •ì±… ì ìš©ê³¼ ë¬¸ì œì ](#ìƒˆë¡œìš´-í• ì¸-ì •ì±…-ì ìš©ê³¼-ë¬¸ì œì )<br>
[3. ê´€ì‹¬ì‚¬ì˜ ë¶„ë¦¬](#ê´€ì‹¬ì‚¬ì˜-ë¶„ë¦¬)<br>
[4. AppConfig ë¦¬íŒ©í„°ë§](#appconfig-ë¦¬íŒ©í„°ë§)<br>
[5. ìƒˆë¡œìš´ êµ¬ì¡°ì™€ í• ì¸ ì •ì±… ì ìš©](#ìƒˆë¡œìš´-êµ¬ì¡°ì™€-í• ì¸-ì •ì±…-ì ìš©)<br>
[6. ì¢‹ì€ ê°ì²´ ì§€í–¥ ì„¤ê³„ì˜ 5ê°€ì§€ ì›ì¹™ì˜ ì ìš©](#ì¢‹ì€-ê°ì²´-ì§€í–¥-ì„¤ê³„ì˜-5ê°€ì§€-ì›ì¹™ì˜-ì ìš©)<br>
[7. IoC, DI, ê·¸ë¦¬ê³  ì»¨í…Œì´ë„ˆ](#ioc-di-ê·¸ë¦¬ê³ -ì»¨í…Œì´ë„ˆ)<br>
[8. ìŠ¤í”„ë§ìœ¼ë¡œ ì „í™˜í•˜ê¸°](#ìŠ¤í”„ë§ìœ¼ë¡œ-ì „í™˜í•˜ê¸°)

## ê°ì²´ ì§€í–¥ ì›ë¦¬ ì ìš©
### ìƒˆë¡œìš´ í• ì¸ ì •ì±… ê°œë°œ
ì •ë¥  í• ì¸ìœ¼ë¡œ ë³€ê²½  
RateDiscountPolicy ì¶”ê°€
<img width="100%" alt="Image" src="https://github.com/user-attachments/assets/63cb0a04-02af-47ba-b984-f2caf79746b4" />

`discount > RateDiscountPolicy`
```java
package hello.core.discount;
import hello.core.member.Grade;
import hello.core.member.Member;
public class RateDiscountPolicy implements DiscountPolicy {
    private int discountPercent = 10; //10% í• ì¸ 

    @Override
    public int discount(Member member, int price) {
        if (member.getGrade() == Grade.VIP) {
            return price * discountPercent / 100;
        } else {
            return 0;
        }
    }
}
```
ğŸ“Œ cmd + shift + t í•´ì„œ í…ŒìŠ¤íŠ¸ íŒŒì¼ ë§Œë“¤ê³  í• ì¸ ì˜ ë˜ëŠ”ì§€ í™•ì¸

<img width="50%" alt="Image" src="https://github.com/user-attachments/assets/5e090057-307e-4332-b313-63a776686a6d" />

```java
package hello.core.discount;

import hello.core.member.Grade;
import hello.core.member.Member;
import org.junit.jupiter.api.DisplayName;
import org.junit.jupiter.api.Test;

import static org.assertj.core.api.Assertions.*;
import static org.junit.jupiter.api.Assertions.*;

class RateDiscountPolicyTest {
    RateDiscountPolicy discountPolicy = new RateDiscountPolicy();
    @Test
    @DisplayName("VIPëŠ” 10% í• ì¸ì´ ì ìš©ë˜ì–´ì•¼ í•œë‹¤.") 
    void vip_o() {
        //given
        Member member = new Member(1L, "memberVIP", Grade.VIP);
        //when
        int discount = discountPolicy.discount(member, 10000);
        //then
        assertThat(discount).isEqualTo(1000);
    }
    @Test
    @DisplayName("VIPê°€ ì•„ë‹ˆë©´ í• ì¸ì´ ì ìš©ë˜ì§€ ì•Šì•„ì•¼ í•œë‹¤.") 
    void vip_x() {
        //given
        Member member = new Member(2L, "memberBASIC", Grade.BASIC);
        //when
        int discount = discountPolicy.discount(member, 10000);
        //then
        assertThat(discount).isEqualTo(0);
    }

}
```
---
### ìƒˆë¡œìš´ í• ì¸ ì •ì±… ì ìš©ê³¼ ë¬¸ì œì 
í• ì¸ ì •ì±…ì„ ë³€ê²½í•˜ë ¤ë©´ í´ë¼ì´ì–¸íŠ¸ì¸ `OrderServiceImpl` ì½”ë“œë¥¼ ê³ ì³ì•¼ í•¨

`FixDiscountPolicy` -> `RateDiscountPolicy`

`order > OrderServiceImpl`
```java
public class OrderServiceImpl implements OrderService {
 //    private final DiscountPolicy discountPolicy = new FixDiscountPolicy();
     private final DiscountPolicy discountPolicy = new RateDiscountPolicy();
 }
```
ì´ ë°©ì‹ì€ SOLID ë°©ì‹ì—ì„œ ë‘ê°€ì§€ë¥¼ ìœ„ë°˜ ì¤‘

1. DIP

    ì§€ê¸ˆ í´ë˜ìŠ¤ëŠ” ì¸í„°í˜ì´ìŠ¤ ë¿ë§Œ ì•„ë‹ˆë¼ êµ¬í˜„ì²´ì—ë„ ì˜ì¡´í•˜ê³  ìˆìŒ
    
    `DiscountPolicy` ì¸í„°í˜ì´ìŠ¤ì—ë§Œ ì˜ì¡´í•´ì•¼í•˜ì§€ë§Œ `FixDiscountPolicy`, `RateDiscountPolicy` ë‘˜ ë‹¤ì— ì˜ì¡´

    ê¸°ëŒ€í–ˆë˜ ì˜ì¡´ê´€ê³„
    <img width="100%" alt="Image" src="https://github.com/user-attachments/assets/80fa4879-b7d1-4492-ab75-28ce92971d74" />

    ì‹¤ì œ ì˜ì¡´ê´€ê³„
    <img width="100%" alt="Image" src="https://github.com/user-attachments/assets/08ef5184-5d12-48c5-9b2f-af350bc013b2" />

2. OCP
    
    ê¸°ëŠ¥ì„ í™•ì¥í•´ì„œ ë³€ê²½í•  ë•Œ í´ë¼ì´ì–¸íŠ¸ ì½”ë“œì— ì˜í–¥ì„ ì£¼ê³  ìˆìŒ
    
    `FixDiscountPolicy`ë¥¼ `RateDiscountPolicy`ë¡œ ë³€ê²½í•˜ëŠ” ìˆœê°„ `OrderServiceImpl` ì˜ ì†ŒìŠ¤ ì½”ë“œë„ í•¨ê»˜ ë³€ê²½í•´ì•¼í•¨

    <img width="100%" alt="Image" src="https://github.com/user-attachments/assets/af128896-01b7-4183-a82e-8752aa2b77a4" />

> âœ… ì¸í„°í˜ì´ìŠ¤ì—ë§Œ ì˜ì¡´í•˜ë„ë¡ ì„¤ê³„ë¥¼ ë³€ê²½
<img width="100%" alt="Image" src="https://github.com/user-attachments/assets/86145650-d706-46ba-8fc2-e4c0af9c65e7" />

í•˜ì§€ë§Œ ì¸í„°í˜ì´ìŠ¤ì—ë§Œ ì˜ì¡´í•˜ë„ë¡ ì½”ë“œë¥¼ ë³€ê²½í•˜ë©´
```java
public class OrderServiceImpl implements OrderService {
     //private final DiscountPolicy discountPolicy = new RateDiscountPolicy();
     private DiscountPolicy discountPolicy;
}
```
êµ¬í˜„ì²´ê°€ ì—†ê¸° ë•Œë¬¸ì— ì½”ë“œê°€ ì‹¤í–‰ë  ìˆ˜ ì—†ìŒ  
ì‹¤ì œ ì‹¤í–‰ì„ í•´ë³´ë©´ NPE(null pointer exception)ê°€ ë°œìƒ

âœ… ëˆ„êµ°ê°€ê°€ í´ë¼ì´ì–¸íŠ¸ì¸ `OrderServiceImpl` ì— `DiscountPolicy` ì˜ êµ¬í˜„ ê°ì²´ë¥¼ ëŒ€ì‹  ìƒì„±í•˜ê³  ì£¼ì…í•´ì£¼ì–´ì•¼ í•¨

---
### ê´€ì‹¬ì‚¬ì˜ ë¶„ë¦¬

**AppConfig**

ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ì „ì²´ ë™ì‘ ë°©ì‹ì„ êµ¬ì„±(config)í•˜ê¸° ìœ„í•´, **êµ¬í˜„ ê°ì²´ë¥¼ ìƒì„±**í•˜ê³ , **ì—°ê²°**í•˜ëŠ” ì±…ì„ì„ ê°€ì§€ëŠ” ë³„ë„ì˜
ì„¤ì • í´ë˜ìŠ¤

`AppConfig`
```java
package hello.core;
import hello.core.discount.FixDiscountPolicy;
import hello.core.member.MemberService;
import hello.core.member.MemberServiceImpl;
import hello.core.member.MemoryMemberRepository;
import hello.core.order.OrderService;
import hello.core.order.OrderServiceImpl;
public class AppConfig {
    public MemberService memberService() {
        return new MemberServiceImpl(new MemoryMemberRepository());
}
    public OrderService orderService() {
        return new OrderServiceImpl(
                new MemoryMemberRepository(),
                new FixDiscountPolicy());
    }
}
```
- ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ì‹¤ì œ ë™ì‘ì— í•„ìš”í•œ **êµ¬í˜„ ê°ì²´ë¥¼ ìƒì„±**

    `MemberServiceImpl`

    `MemoryMemberRepository`

    `OrderServiceImpl`

    `FixDiscountPolicy`

- ìƒì„±í•œ ê°ì²´ ì¸ìŠ¤í„´ìŠ¤ì˜ ì°¸ì¡°(ë ˆí¼ëŸ°ìŠ¤)ë¥¼ **ìƒì„±ìë¥¼ í†µí•´ì„œ ì£¼ì…(ì—°ê²°)**

    `MemberServiceImpl` -> `MemoryMemberRepository`

    `OrderServiceImpl` -> `MemoryMemberRepository`, `FixDiscountPolicy`


    `member > MemberServiceImpl`
    ```java
    package hello.core.member;
    public class MemberServiceImpl implements MemberService {
        //private final MemberRepository memberRepository = new MemoryMemberRepository();
        private final MemberRepository memberRepository;
        public MemberServiceImpl(MemberRepository memberRepository) {
            this.memberRepository = memberRepository;
    }
        public void join(Member member) {
            memberRepository.save(member);
    }
        public Member findMember(Long memberId) {
            return memberRepository.findById(memberId);
    } }
    ```

- ì´ì œ `MemberServiceImpl` ì€ `MemoryMemberRepository`(êµ¬ì²´í™”) ë¥¼ ì˜ì¡´í•˜ì§€ ì•Šê³  `MemberRepository` ì¸í„°í˜ì´ìŠ¤(ì¶”ìƒí™”)ë§Œ ì˜ì¡´

- `MemberServiceImpl` ì˜ ìƒì„±ìë¥¼ í†µí•´ì„œ ì–´ë–¤ êµ¬í˜„ ê°ì²´ë¥¼ ì£¼ì…í• ì§€ëŠ” ì˜¤ì§ ì™¸ë¶€( `AppConfig` )ì—ì„œ ê²°ì •
    
- âœ… `MemberServiceImpl` ì€ ì´ì œë¶€í„° **ì˜ì¡´ê´€ê³„ì— ëŒ€í•œ ê³ ë¯¼ì€ ì™¸ë¶€**ì— ë§¡ê¸°ê³  **ì‹¤í–‰ì—ë§Œ ì§‘ì¤‘**í•˜ë©´ ëœë‹¤.

- ë¹„ìŠ·í•˜ê²Œ `OrderServiceImpl`ë„ ìˆ˜ì •

<img width="100%" alt="Image" src="https://github.com/user-attachments/assets/8712cc03-339c-4b54-b7e6-ef27aae10239" />

1. `appConfig` ê°ì²´ëŠ” `memoryMemberRepository` ê°ì²´ë¥¼ ìƒì„±
2. ê·¸ ì°¸ì¡°ê°’ì„ `memberServiceImpl` ì„ ìƒì„±í•˜ë©´ì„œ ìƒì„±ìë¡œ ì „ë‹¬

âœ… í´ë¼ì´ì–¸íŠ¸ì¸ `memberServiceImpl` ì…ì¥ì—ì„œ ë³´ë©´ ì˜ì¡´ê´€ê³„ë¥¼ ë§ˆì¹˜ ì™¸ë¶€ì—ì„œ ì£¼ì…í•´ì£¼ëŠ” ê²ƒ ê°™ë‹¤ê³  í•´ì„œ DI(Dependency Injection) ìš°ë¦¬ë§ë¡œ ì˜ì¡´ê´€ê³„ ì£¼ì… ë˜ëŠ” ì˜ì¡´ì„± ì£¼ì…ì´ë¼ ë¶€ë¦„

`MemberApp`
```java
package hello.core;

import hello.core.member.Grade;
import hello.core.member.Member;
import hello.core.member.MemberService;

public class MemberApp {
    public static void main(String[] args) {
        //MemberService memberService = new MemberServiceImpl();
        AppConfig appConfig = new AppConfig();
        MemberService memberService = appConfig.memberService();
        Member member = new Member(1L, "A", Grade.VIP);
        memberService.join(member);

        Member findMember = memberService.findMember(1L);
        System.out.println("new member = " + member.getName());
        System.out.println("find Member = " + findMember.getName());
    }
}
```
OrderAppë„ ë¹„ìŠ·í•˜ê²Œ êµ¬ì„±

í…ŒìŠ¤íŠ¸ ì½”ë“œ ì˜¤ë¥˜ë„ ìˆ˜ì •

```java
class MemberServiceTest {
    MemberService memberService;
    @BeforeEach
    public void beforeEach() {
        AppConfig appConfig = new AppConfig();
        memberService = appConfig.memberService();
    }
    //ìƒëµ..
}


class OrderServiceTest {
    MemberService memberService;
    OrderService orderService;
    @BeforeEach
    public void beforeEach() {
        AppConfig appConfig = new AppConfig();
        memberService = appConfig.memberService();
        orderService = appConfig.orderService();
    } 
    //ìƒëµ..
}
```

---
### AppConfig ë¦¬íŒ©í„°ë§

í˜„ì¬ AppConfig
- **ì¤‘ë³µ**
    
    `new MemoryMemberRepository()` 

- **ì—­í• **ì— ë”°ë¥¸ **êµ¬í˜„**ì´ ì˜ ì•ˆ ë³´ì„

ğŸ“Œ option + command + m ìœ¼ë¡œ ë¦¬íŒ©í† ë§ -> ì¤‘ë³µëœ ê±°ë„ ê°™ì´ ê³ ì³ì¤Œ
```java
package hello.core;

import hello.core.discount.DiscountPolicy;
import hello.core.discount.FixDiscountPolicy;
import hello.core.member.MemberRepository;
import hello.core.member.MemberService;
import hello.core.member.MemberServiceImpl;
import hello.core.member.MemoryMemberRepository;
import hello.core.order.OrderService;
import hello.core.order.OrderServiceImpl;

public class AppConfig {
    public MemberService memberService() {
        return new MemberServiceImpl(memberRepository());
    }
    public OrderService orderService() {
        return new OrderServiceImpl(
                memberRepository(),
                discountPolicy());
    }
    public MemberRepository memberRepository() {
        return new MemoryMemberRepository();
    }
    public DiscountPolicy discountPolicy() {
        return new FixDiscountPolicy();
    }


}
```
ì—­í• ì— ë”°ë¥¸ êµ¬í˜„ì´ ì˜ ë³´ì„


---
### ìƒˆë¡œìš´ êµ¬ì¡°ì™€ í• ì¸ ì •ì±… ì ìš©
FixDiscountPolicy -> RateDiscountPolicy
<img width="100%" alt="Image" src="https://github.com/user-attachments/assets/3edc4f69-f3dd-44e3-84fa-386f40159887" />
`AppConfig`ë§Œ ìˆ˜ì •
```java
public DiscountPolicy discountPolicy() {
//        return new FixDiscountPolicy();
        return new RateDiscountPolicy();
    }
```

---
### ì¢‹ì€ ê°ì²´ ì§€í–¥ ì„¤ê³„ì˜ 5ê°€ì§€ ì›ì¹™ì˜ ì ìš©
- SRP ë‹¨ì¼ ì±…ì„ ì›ì¹™: 

    **í•œ í´ë˜ìŠ¤ëŠ” í•˜ë‚˜ì˜ ì±…ì„ë§Œ ê°€ì ¸ì•¼ í•œë‹¤.**

    êµ¬í˜„ ê°ì²´ë¥¼ ìƒì„±í•˜ê³  ì—°ê²°í•˜ëŠ” ì±…ì„ì€ AppConfigê°€ ë‹´ë‹¹

    í´ë¼ì´ì–¸íŠ¸ ê°ì²´ëŠ” ì‹¤í–‰í•˜ëŠ” ì±…ì„ë§Œ ë‹´ë‹¹

<br>

- DIP ì˜ì¡´ê´€ê³„ ì—­ì „ ì›ì¹™

    **í”„ë¡œê·¸ë˜ë¨¸ëŠ” â€œì¶”ìƒí™”ì— ì˜ì¡´í•´ì•¼ì§€, êµ¬ì²´í™”ì— ì˜ì¡´í•˜ë©´ ì•ˆëœë‹¤.â€ ì˜ì¡´ì„± ì£¼ì…ì€ ì´ ì›ì¹™ì„ ë”°ë¥´ëŠ” ë°©ë²• ì¤‘ í•˜ë‚˜ë‹¤.**
    
    ìƒˆë¡œìš´ í• ì¸ ì •ì±…ì„ ê°œë°œí•˜ê³ , ì ìš©í•˜ë ¤ê³  í•˜ë‹ˆ í´ë¼ì´ì–¸íŠ¸ ì½”ë“œë„ í•¨ê»˜ ë³€ê²½í•´ì•¼ í–ˆìŒ(ì™œëƒí•˜ë©´ ê¸°ì¡´ í´ë¼ì´ì–¸íŠ¸ ì½”ë“œëŠ” `DiscountPolicy` ì¶”ìƒí™” ì¸í„°í˜ì´ìŠ¤ì™€ `FixDiscountPolicy` êµ¬ì²´í™” êµ¬í˜„ í´ë˜ìŠ¤ì—ë„ í•¨ê»˜ ì˜ì¡´í–ˆê¸° ë•Œë¬¸)

    í´ë¼ì´ì–¸íŠ¸ ì½”ë“œê°€ `DiscountPolicy` ì¶”ìƒí™” ì¸í„°í˜ì´ìŠ¤ì—ë§Œ ì˜ì¡´í•˜ë„ë¡ ì½”ë“œë¥¼ ë³€ê²½
    
    -> í•˜ì§€ë§Œ í´ë¼ì´ì–¸íŠ¸ ì½”ë“œëŠ” ì¸í„°í˜ì´ìŠ¤ë§Œìœ¼ë¡œëŠ” ì•„ë¬´ê²ƒë„ ì‹¤í–‰í•  ìˆ˜ ì—†ìŒ
    
    -> AppConfigê°€ `FixDiscountPolicy` ê°ì²´ ì¸ìŠ¤í„´ìŠ¤ë¥¼ í´ë¼ì´ì–¸íŠ¸ ì½”ë“œ ëŒ€ì‹  ìƒì„±í•´ì„œ í´ë¼ì´ì–¸íŠ¸ ì½”ë“œì— ì˜ì¡´ê´€ê³„ ì£¼ì…

<br>

- OCP

    **ì†Œí”„íŠ¸ì›¨ì–´ ìš”ì†ŒëŠ” í™•ì¥ì—ëŠ” ì—´ë ¤ ìˆìœ¼ë‚˜ ë³€ê²½ì—ëŠ” ë‹«í˜€ ìˆì–´ì•¼ í•œë‹¤**
    
    ë‹¤í˜•ì„± ì‚¬ìš©í•˜ê³  í´ë¼ì´ì–¸íŠ¸ê°€ DIPë¥¼ ì§€í‚´

    ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ì‚¬ìš© ì˜ì—­ê³¼ êµ¬ì„± ì˜ì—­ìœ¼ë¡œ ë‚˜ëˆ”
    
    -> AppConfigê°€ ì˜ì¡´ê´€ê³„ë¥¼ `FixDiscountPolicy` `RateDiscountPolicy` ë¡œ ë³€ê²½í•´ì„œ í´ë¼ì´ì–¸íŠ¸ ì½”ë“œì— ì£¼ì…í•˜ë¯€ë¡œ í´ë¼ì´ì–¸íŠ¸ ì½”ë“œëŠ” ë³€ê²½í•˜ì§€ ì•Šì•„ë„ ë¨

    **ì†Œí”„íŠ¸ì›¨ì–´ ìš”ì†Œë¥¼ ìƒˆë¡­ê²Œ í™•ì¥í•´ë„ ì‚¬ìš© ì˜ì—­ì˜ ë³€ê²½ì€ ë‹«í˜€ ìˆë‹¤!**

---
### IoC, DI, ê·¸ë¦¬ê³  ì»¨í…Œì´ë„ˆ

- ì œì–´ì˜ ì—­ì „ IoC(Inversion of Control)

    êµ¬í˜„ ê°ì²´ëŠ” ìì‹ ì˜ ë¡œì§ì„ ì‹¤í–‰í•˜ëŠ” ì—­í• ë§Œ ë‹´ë‹¹í•˜ê³  í”„ë¡œê·¸ë¨ì˜ ì œì–´ íë¦„ì€ ì´ì œ AppConfigê°€ ê°€ì ¸ê°

    í”„ë¡œê·¸ë¨ì˜ ì œì–´ íë¦„ì„ ì§ì ‘ ì œì–´í•˜ëŠ” ê²ƒì´ ì•„ë‹ˆë¼ ì™¸ë¶€ì—ì„œ ê´€ë¦¬í•˜ëŠ” ê²ƒ

<br>

- ì˜ì¡´ê´€ê³„ ì£¼ì… DI(Dependency Injection)

    - ì •ì ì¸ í´ë˜ìŠ¤ ì˜ì¡´ê´€ê³„

        í´ë˜ìŠ¤ê°€ ì‚¬ìš©í•˜ëŠ” import ì½”ë“œë§Œ ë³´ê³  ì˜ì¡´ê´€ê³„ë¥¼ ì‰½ê²Œ íŒë‹¨ ê°€ëŠ¥

    - ë™ì ì¸ ê°ì²´ ì¸ìŠ¤í„´ìŠ¤ ì˜ì¡´ ê´€ê³„

        ì• í”Œë¦¬ì¼€ì´ì…˜ ì‹¤í–‰ ì‹œì ì— ì‹¤ì œ ìƒì„±ëœ ê°ì²´ ì¸ìŠ¤í„´ìŠ¤ì˜ ì°¸ì¡°ê°€ ì—°ê²°ëœ ì˜ì¡´ ê´€ê³„

        ì˜ì¡´ê´€ê³„ ì£¼ì…ì„ ì‚¬ìš©í•˜ë©´ í´ë¼ì´ì–¸íŠ¸ ì½”ë“œë¥¼ ë³€ê²½í•˜ì§€ ì•Šê³  í´ë¼ì´ì–¸íŠ¸ê°€ í˜¸ì¶œí•˜ëŠ” ëŒ€ìƒì˜ íƒ€ì… ì¸ìŠ¤í„´ìŠ¤ë¥¼ ë³€ ê²½ ê°€ëŠ¥

        ì˜ì¡´ê´€ê³„ ì£¼ì…ì„ ì‚¬ìš©í•˜ë©´ ì •ì ì¸ í´ë˜ìŠ¤ ì˜ì¡´ê´€ê³„ë¥¼ ë³€ê²½í•˜ì§€ ì•Šê³  ë™ì ì¸ ê°ì²´ ì¸ìŠ¤í„´ìŠ¤ ì˜ì¡´ê´€ê³„ë¥¼ ì‰½ê²Œ ë³€ê²½ ê°€ëŠ¥

- IoC ì»¨í…Œì´ë„ˆ, DI ì»¨í…Œì´ë„ˆ

    AppConfig ì²˜ëŸ¼ ê°ì²´ë¥¼ ìƒì„±í•˜ê³  ê´€ë¦¬í•˜ë©´ì„œ ì˜ì¡´ê´€ê³„ë¥¼ ì—°ê²°í•´ ì£¼ëŠ” ê²ƒ

    ì–´ìƒ˜ë¸”ëŸ¬, ì˜¤ë¸Œì íŠ¸ íŒ©í† ë¦¬ë¼ê³ ë„ í•¨


---
### ìŠ¤í”„ë§ìœ¼ë¡œ ì „í™˜í•˜ê¸°
`AppConfig`
```java
package hello.core;

import hello.core.discount.DiscountPolicy;
import hello.core.discount.FixDiscountPolicy;
import hello.core.discount.RateDiscountPolicy;
import hello.core.member.MemberService;
import hello.core.member.MemberServiceImpl;
import hello.core.member.MemoryMemberRepository;
import hello.core.order.OrderService;
import hello.core.order.OrderServiceImpl;
import org.springframework.context.annotation.Bean;
import org.springframework.context.annotation.Configuration;

@Configuration
public class AppConfig {

    @Bean
    public MemberService memberService() {
        return new MemberServiceImpl(memberRepository());
    }
    
    @Bean
    public MemoryMemberRepository memberRepository() {
        return new MemoryMemberRepository();
    }

    @Bean
    public OrderService orderService() {
        return new OrderServiceImpl(
                memberRepository(),
                discountPolicy());
    }

    @Bean
    public DiscountPolicy discountPolicy() {
//        return new FixDiscountPolicy();
        return new RateDiscountPolicy();
    }

}
```
- ì„¤ì •ì„ êµ¬ì„±í•œë‹¤ëŠ” ëœ»ì˜ `@Configuration` ì„ ë¶™ì—¬ì£¼ê¸°
- ê° ë©”ì„œë“œì— `@Bean` ì„ ë¶™ì—¬ì£¼ê¸° -> ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆì— ìŠ¤í”„ë§ ë¹ˆìœ¼ë¡œ ë“±ë¡ë¨
`MemberApp`
```java
package hello.core;

import hello.core.member.Grade;
import hello.core.member.Member;
import hello.core.member.MemberService;
import org.springframework.context.ApplicationContext;
import org.springframework.context.annotation.AnnotationConfigApplicationContext;

public class MemberApp {
    public static void main(String[] args) {
        //MemberService memberService = new MemberServiceImpl();
//        AppConfig appConfig = new AppConfig();
//        MemberService memberService = appConfig.memberService();

        ApplicationContext applicationContext = new AnnotationConfigApplicationContext(AppConfig.class);
        MemberService memberService = applicationContext.getBean("memberService", MemberService.class);

        Member member = new Member(1L, "A", Grade.VIP);
        memberService.join(member);

        Member findMember = memberService.findMember(1L);
        System.out.println("new member = " + member.getName());
        System.out.println("find Member = " + findMember.getName());
    }
}
```

`OrderApp`
```java
package hello.core;

import hello.core.member.Grade;
import hello.core.member.Member;
import hello.core.member.MemberService;
import hello.core.member.MemberServiceImpl;
import hello.core.order.Order;
import hello.core.order.OrderService;
import hello.core.order.OrderServiceImpl;
import org.springframework.context.ApplicationContext;
import org.springframework.context.annotation.AnnotationConfigApplicationContext;

public class OrderApp {
    public static void main(String[] args) {
        //MemberService memberService = new MemberServiceImpl();
        //OrderService orderService = new OrderServiceImpl();
//        AppConfig appConfig = new AppConfig();
//        MemberService memberService = appConfig.memberService();
//        OrderService orderService = appConfig.orderService();

        ApplicationContext applicationContext = new AnnotationConfigApplicationContext(AppConfig.class);
        MemberService memberService = applicationContext.getBean("memberService", MemberService.class);
        OrderService orderService = applicationContext.getBean("orderService", OrderService.class);

        Long memberId = 1L;
        Member member = new Member(memberId, "memberA", Grade.VIP);
        memberService.join(member);
        Order order = orderService.createOrder(memberId, "itemA", 10000);
        System.out.println("order = " + order);
    }
}
```
- `ApplicationContext`: ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆ
- ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆëŠ” `@Configuration` ì´ ë¶™ì€ `AppConfig` ë¥¼ ì„¤ì •(êµ¬ì„±) ì •ë³´ë¡œ ì‚¬ìš©
    - ì—¬ê¸°ì„œ `@Bean` ì´ë¼ ì íŒ ë©”ì„œë“œë¥¼ ëª¨ë‘ í˜¸ì¶œí•´ì„œ ë°˜í™˜ëœ ê°ì²´ë¥¼ ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆì— ë“±ë¡
    - ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆì— ë“±ë¡ëœ ê°ì²´ë¥¼ ìŠ¤í”„ë§ ë¹ˆì´ë¼ í•¨


- ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆë¥¼ í†µí•´ì„œ í•„ìš”í•œ ìŠ¤í”„ë§ ë¹ˆ(ê°ì²´)ë¥¼ ì°¾ì•„ì•¼ í•¨
    - ìŠ¤í”„ë§ ë¹ˆì€ `applicationContext.getBean()` ë©”ì„œë“œë¥¼ ì‚¬ìš© í•´ì„œ ì°¾ì„ ìˆ˜ ìˆìŒ